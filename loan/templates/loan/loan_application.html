{% extends 'base.html' %}
{% block content %}
  <div class="text-center mb-4">
    <h1 class="fw-bold">Apply in minutes</h1>
    <p class="text-muted mb-0">Same-day funding up to $1,600 with transparent $4 per $100 pricing.</p>
  </div>

  <div class="row g-2 mb-4">
    <div class="col-6">
      <div class="p-3 border rounded-4 text-center">
        <div class="text-primary fw-bold">$1,600</div>
        <small class="text-muted">Maximum funding</small>
      </div>
    </div>
    <div class="col-6">
      <div class="p-3 border rounded-4 text-center">
        <div class="text-primary fw-bold">6-12 mo</div>
        <small class="text-muted">Repayment terms</small>
      </div>
    </div>
  </div>

  <form method="post" novalidate onsubmit="showLoanAppSpinner(event)">
    {% csrf_token %}
    {{ form.non_field_errors }}
    {% for field in form %}
      <div class="mb-3">
        <label class="form-label fw-semibold">{{ field.label }}</label>
        {{ field }}
        {% if field.help_text %}
          <div class="form-text">{{ field.help_text }}</div>
        {% endif %}
        {% if field.errors %}
          <div class="text-danger small">{{ field.errors|striptags }}</div>
        {% endif %}
      </div>
    {% endfor %}
    <button type="submit" class="btn btn-primary w-100 py-2" id="loan-app-submit-btn">
      <span id="loan-app-btn-text">Submit application</span>
      <span id="loan-app-spinner" class="spinner-border spinner-border-sm ms-2" style="display:none;" role="status" aria-hidden="true"></span>
    </button>
  </form>

  <script>
    function showLoanAppSpinner(e) {
      var btn = document.getElementById('loan-app-submit-btn');
      var spinner = document.getElementById('loan-app-spinner');
      var text = document.getElementById('loan-app-btn-text');
      btn.disabled = true;
      spinner.style.display = 'inline-block';
      text.textContent = 'Submitting...';
    }
  </script>
  </form>

  <small class="text-muted d-block mt-3">Licensed by the Texas OCCC. Not a payday lender. Credit bureau reporting included with every installment loan.</small>
{% endblock %}
